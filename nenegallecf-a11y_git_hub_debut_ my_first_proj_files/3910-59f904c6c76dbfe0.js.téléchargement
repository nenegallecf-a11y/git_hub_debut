performance.mark("js-parse-end:3910-59f904c6c76dbfe0.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["3910"],{35973(e,t,l){l.d(t,{D:()=>v,O:()=>g});var r=l(74848),s=l(23131),o=l(49159),i=l(28294),a=l(26647),n=l(93330),u=l(93607),c=l(50279),d=l(96540),m=l(51159),f=l(98703),h=l(68521),p=l(16606);function g({items:e,initialSelectedItems:t,placeholderText:l,selectionVariant:g="single",loading:b,groups:C,filterItems:k,renderAnchor:y,getItemKey:_,convertToItemProps:N,onSelectionChange:w,onOpen:$,onClose:I,onLiveSelectionChange:P,eventsTag:S,height:R="small",width:E="small",selectPanelRef:M,enforceAtleastOneSelected:x,insidePortal:A,maxVisibleItems:B=9,nested:D=!1,resultListAriaLabel:K,title:L,subtitle:T,preventClose:j,triggerOpen:U,initialFilter:O,customNoResultsItem:W,customNoMatchItem:q,footer:H,keybindingCommandId:V,pickerId:F,responsiveOnNarrow:Q,secondaryAction:Z,notice:G,className:X,improvedNoMatchAccessibility:z,noMatchMessage:J,suppressNoMatchItem:Y,focusPrependedElements:ee,anchorSide:et}){let[el,er]=(0,d.useState)(U??!1),[es,eo]=(0,d.useState)(()=>el?Date.now():null),[ei,ea]=(0,d.useState)([]),[en,eu]=(0,d.useState)(O??""),ec=(0,d.useDeferredValue)(en),{updateOpenState:ed,anyItemPickerOpen:em}=(0,h.t)(),[ef,eh]=(0,d.useState)(!1),ep=(0,d.useId)();F&&(ep=F);let eg=Q||(0,s.G7)("primer_react_select_panel_fullscreen_on_narrow");(0,n.w)(()=>{eh(window.innerWidth<768)});let ev=(0,d.useCallback)(e=>{er(e),e?eo(Date.now()):eo(null)},[er]);(0,d.useEffect)(()=>{void 0!==U&&ev(U)},[ev,U]);let eb=(0,d.useCallback)(()=>{em()||el||(ev(!0),$&&$())},[em,el,ev,$]);(0,d.useEffect)(()=>{ed(ep,el)},[ep,el,ed]);let eC="multiple"===g&&!!P,ek=eC?void 0:t,ey=(0,d.useMemo)(()=>new Map,[ep,ek]),e_=(0,d.useCallback)(e=>"string"==typeof e?e:_(e),[_]);(0,d.useEffect)(()=>{if(eC){let e=new Set(t.map(e_)),l=!1;for(let[t,r]of ey.entries()){let s=e.has(t);if(r.selected!==s){l=!0;break}}if(l)for(let[t,l]of ey.entries()){let r=e.has(t);l.selected!==r&&(l.selected=r)}}},[t,ey,eC,e_]);let eN=(0,d.useCallback)(e=>{for(let[,t]of ey)t!==e&&(t.selected=!1)},[ey]),ew=(0,d.useCallback)(()=>{if(eC)for(let[e,t]of ey.entries())t.selected||ey.delete(e)},[eC,ey]),e$=(0,d.useCallback)((e,l)=>{if(j&&!e||"cancel"===l)return;if(!e&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur(),ev(e),e&&$)return void $();eu(""),I&&I();let r=[...ey.values()].filter(e=>e.selected).map(e=>e.source);if(r.length!==t.length||r.some(e=>!t.some(t=>e_(t)===_(e)))){if(es&&S){let e=Date.now()-es,l=r.filter(e=>!t.some(t=>e_(t)===_(e))).length,s=t.filter(e=>!r.some(t=>e_(t)===_(e))).length;(0,o.BI)(`item-picker-${S}-selection-duration`,{selectionDuration:e,totalItemsCount:r.length,addedItemsCount:l,removedItemsCount:s})}w(r)}ew()},[j,ev,$,ew,I,ey,t,e_,_,es,S,w]),eI=(0,d.useCallback)((e,t)=>{let l=_(e),r=ey.get(l),s=N(e);if(r)return{...r,disabled:s.disabled};(r=s).selected=t;let o=r.onAction;return r.onAction=(t,r)=>{let s=ey.get(l);s&&(s.selected=!s.selected,"single"===g&&e.id!==en&&eN(s),o&&o(t,r))},ey.set(l,r),r},[N,en,_,ey,g,eN]),eP=(0,d.useMemo)(()=>{let l=e.map(e=>e.__isNew__?(delete e.__isNew__,q&&ey.delete(_(q)),eI(e,!0)):eI(e,t.some(t=>e_(t)===_(e))));return 0===l.length?z?[]:q?[eI(q,!1)]:Y?[]:en?[q?eI(q,!1):p.Q3]:[W??p.v8]:l},[q,e,ey,eI,t,e_,_,en,W,z,Y]);(0,d.useEffect)(()=>{ea(eP.filter(e=>e.selected))},[eP]);let eS=(0,d.useMemo)(()=>"single"===g?ei[0]:ei,[ei,g]),eR=(0,d.useCallback)(l=>{if(void 0===l){x||ea([]);return}let r=(Array.isArray(l)?l:[l]).map(e=>eP.find(t=>e.id===t.id)).filter(e=>void 0!==e);if(eC){let l=t.filter(t=>!e.some(e=>e_(t)===e_(e))).map(e=>ey.get(e_(e))).filter(e=>void 0!==e);r.push(...l)}ea(r),eC&&P(r.map(e=>e.source))},[eC,P,x,eP,t,e,e_,ey]);(0,a._)([" "],e=>{if(el){let t=document.querySelector(f.Z.activePickerOption(m.B.itemPickerRootId));if(t){let l=t.getAttribute("data-id"),r=[...ey.values()].find(e=>e.id===l);if(r){if(N(r.source).disabled)return;e.preventDefault(),e.stopPropagation(),r.selected=!r.selected,ea([...ey.values()].filter(e=>e.selected)),eC&&P([...ey.values()].filter(e=>e.selected).map(e=>e.source))}}}},{triggerWhenInputElementHasFocus:!0,triggerWhenPortalIsActive:!0});let eE=(0,d.useCallback)(()=>{if(j)return;eu("");let e=[...ey.values()].filter(e=>e.selected).map(e=>e.source);if(e.length!==t.length||e.some(e=>!t.some(t=>e_(t)===_(e)))){for(let e of ey.values())t.some(t=>e_(t)===_(e.source))?e.selected=!0:e.selected=!1;ea([...ey.values()].filter(e=>e.selected))}ev(!1),I&&I(),ew()},[j,ey,t,ew,ev,I,e_,_]);(0,d.useEffect)(()=>{k(ec)},[ec,k]);let eM=eP.length>0;1===eP.length&&(eP[0].id===p.Q3.id||eP[0].id===p.v8.id)&&(eM=!1);let ex=(0,d.useMemo)(()=>C&&C?.length>1&&eM?{groupMetadata:C}:{},[C,eM]),eA=eP.length<=B?"auto":R,eB=(0,d.useMemo)(()=>v(A,M,eA,ef&&eg,el),[A,M,eA,ef,eg,el]),eD=(0,d.useMemo)(()=>J||(en?{variant:"empty",title:"No matches found",body:"Try a different search term"}:{variant:"empty",title:"No items to show",body:""}),[J,en]),eK=(0,d.useMemo)(()=>({renderAnchor:y,placeholderText:l,open:el,onOpenChange:e$,loading:b,items:eP,selected:eS,onSelectedChange:eR,filterValue:en,onFilterChange:eu,showItemDividers:!0,overlayProps:{width:E,className:X,anchorSide:et,...eB},...ex,"aria-label":K,"data-id":m.B.itemPickerRootId,"data-testid":m.B.itemPickerTestId,title:L,subtitle:T,footer:H,onCancel:eE,secondaryAction:Z,notice:G,message:z&&0===eP.length?eD:void 0,focusPrependedElements:ee,scrollBehavior:"instant"}),[y,l,el,e$,b,eP,eS,eR,en,E,eB,ex,K,L,T,H,eD,eE,Z,G,X,z,ee,et]);return(0,r.jsxs)(c.g,{flags:{primer_react_select_panel_fullscreen_on_narrow:void 0===H&&eg},children:[V&&(0,r.jsx)(i.ak,{commands:{[V]:eb}}),(0,r.jsx)(u.X,{anchorRef:D?void 0:M,...eK})]})}function v(e,t,l,r=!1,s=!1){let o=e?"large":l;if(!e||!t?.current||!s)return{height:o};let{top:i}=t.current.getBoundingClientRect(),a=r?0:i-436;return a<0?{height:o}:{height:o,top:a,position:"fixed"}}g.displayName="ItemPicker"},98106(e,t,l){l.d(t,{S:()=>r});let r={couldNotUpdateAssignees:"Could not update assignees",couldNotSearchAssignees:"Could not search assignees",couldNotUpdateLabels:"Could not update labels",couldNotSearchLabels:"Could not search labels",couldNotUpdateMilestone:"Could not update milestone",couldNotUpdateType:"Could not update type",couldNotSearchMilestones:"Could not search milestones",couldNotUpdateIssueType:"Could not update issue type",couldNotSearchRepositories:"Could not search repositories",couldNotSearchPullRequests:"Could not search pull requests",couldNotSearchProjects:"Could not search projects",couldNotSearchBranches:"Could not search branches",noMatches:"No matches",noResults:"No results",couldNotCreateBranch:"Could not create branch",couldNotCreateLabel:"Could not create label",couldNotCreateMilestone:"Could not create milestone",branchAlreadyExists:e=>`The branch ${e} already exists.`}},51159(e,t,l){l.d(t,{B:()=>r});let r={itemPickerRootId:"item-picker-root-id",itemPickerTestId:"item-picker-root"}},98703(e,t,l){l.d(t,{Z:()=>r});let r={activePickerOption:e=>`[data-id="${e}"] [data-is-active-descendant="activated-directly"]`}},68521(e,t,l){l.d(t,{D:()=>i,t:()=>a});var r=l(74848),s=l(96540);let o=(0,s.createContext)({updateOpenState:()=>void 0,anyItemPickerOpen:()=>!1});function i({children:e}){let t=(0,s.useRef)({}),l=(0,s.useCallback)((e,l)=>{let r=t.current;return r[e]===l||(t.current={...r,[e]:l}),t.current},[]),i=(0,s.useCallback)(()=>Object.values(t.current).some(e=>e),[t]),a=(0,s.useMemo)(()=>({updateOpenState:l,anyItemPickerOpen:i}),[i,l]);return(0,r.jsx)(o,{value:a,children:e})}function a(){let e=(0,s.use)(o);if(!e)throw Error("useItemPickersContext must be used within a ItemPickersContextProvider.");return e}o.displayName="ItemPickersContext",i.displayName="ItemPickersContextProvider"},16606(e,t,l){l.d(t,{A2:()=>n,Q3:()=>o,ku:()=>a,v8:()=>i});var r=l(38621),s=l(98106);let o={leadingVisual:r.CircleSlashIcon,text:s.S.noMatches,disabled:!0,selected:void 0,key:"no-matches",id:"no-matches"},i={leadingVisual:r.CircleSlashIcon,text:s.S.noResults,disabled:!0,selected:void 0,key:"no-results",id:"no-results"},a=e=>{try{new URL(e)}catch{return!1}return new RegExp(/^.+\/pull\/\d+$/).test(e)},n=(e="",t="",l="")=>{let r=e&&`owner:${e.trim()} `,s=l&&`repo:${l.trim()} `,o=t&&`${t.trim()}`,i=(e=>{try{new URL(e)}catch{return!1}return new RegExp(/^.+\/issues\/\d+$/).test(e)})(t),a="in:title",n=o&&"#"===o.charAt(0)?o.slice(1):o;n&&!isNaN(Number(n))&&(a+=" in:number");let u=`${r}${s}is:issue ${a}`;return{commenters:`${u} commenter:@me ${o}`.trim(),mentions:`${u} mentions:@me ${o}`.trim(),assignee:`${u} assignee:@me ${o}`.trim(),author:`${u} author:@me ${o}`.trim(),other:`${u} ${o}`.trim(),resource:i?encodeURI(t):"",queryIsUrl:i}}},26647(e,t,l){l.d(t,{A:()=>i,_:()=>a});var r=l(16522),s=l(96540),o=l(46629);let i={ctrlKey:"ctrlKey",altKey:"altKey",shiftKey:"shiftKey",metaKey:"metaKey"},a=(e,t,l)=>{let a,n,u,c,d=(0,r.c)(11),m=(0,s.useRef)(t);d[0]!==t?(a=()=>{m.current=t},d[0]=t,d[1]=a):a=d[1],(0,s.useLayoutEffect)(a),d[2]!==e||d[3]!==l?(n=t=>{(![...document.querySelectorAll('#__primerPortalRoot__, [id$="-portal-root"]')].some(function e(t){if(t.clientHeight>0)return!0;for(let l of t.children)if(e(l))return!0;return!1})||l?.triggerWhenPortalIsActive)&&(function(e,t){for(let l of Object.values(i))if(t&&t[l]&&!e[l]||e[l]&&(!t||!t[l]))return!1;return!0}(t,l)||l?.ignoreModifierKeys)&&!(!l?.triggerWhenInputElementHasFocus&&(0,o.fg)(t.target))&&e.some(e=>/^\d$/.test(e)?t.code===`Digit${e}`:"/"===e?"Slash"===t.code:t.key===e)&&m.current(t)},d[2]=e,d[3]=l,d[4]=n):n=d[4];let f=n;d[5]!==f||d[6]!==l?.scopeRef?.current?(u=()=>{let e=l?.scopeRef?.current||document;return e.addEventListener("keydown",f),()=>e.removeEventListener("keydown",f)},d[5]=f,d[6]=l?.scopeRef?.current,d[7]=u):u=d[7];let h=l?.scopeRef;d[8]!==f||d[9]!==h?(c=[f,h],d[8]=f,d[9]=h,d[10]=c):c=d[10],(0,s.useEffect)(u,c)}}}]);
//# sourceMappingURL=3910-59f904c6c76dbfe0-becba721396ac2fa.js.map