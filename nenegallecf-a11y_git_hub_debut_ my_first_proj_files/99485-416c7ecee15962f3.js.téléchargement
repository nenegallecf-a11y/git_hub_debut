performance.mark("js-parse-end:99485-416c7ecee15962f3.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["99485"],{11614(e,t,r){r.d(t,{y:()=>s});var a=r(26261),n=r(80798);let i=2592e5,o=async(e,t)=>await e(t),s=({validator:e,sendAnalyticsEvent:t,prefix:r="key",maxAgeMs:s=i,alwaysRefetch:c,enabled:l=!0})=>l?function({storage:e,sendAnalyticsEvent:t,maxAgeMs:r=864e5,prefix:n="tanstack-query",refetchOnRestore:i=!0}){async function o(t,r){if(null!=e){let i=`${n}-${t}`;try{let t=await e.getItem(i);if(t)return r&&a.jG.schedule(()=>r(t)),t.state.data}catch{await e.removeItem(i)}}}async function s(t,r){if(null!=e){let e=r.getQueryCache().find({queryKey:t});e&&await c(e)}}async function c(t){if(null!=e){let a=`${n}-${t.queryHash}`;e.setItem(a,{state:t.state,queryKey:t.queryKey,queryHash:t.queryHash},t.state.dataUpdatedAt,r)}}return{persisterFn:async function(r,s,l){let u=`${n}-${l.queryHash}`,d=void 0!==l.state.data,_=performance.now();if(void 0===l.state.data&&null!=e){let e=await o(l.queryHash,e=>{let r=performance.now(),a=Math.round(r-_);l.setState({dataUpdatedAt:e.state.dataUpdatedAt});let n="always"===i,o=!0===i&&l.isStale(),s={is_always_restore:n,is_stale_data:o,indexeddb_duration_ms:a};n||o?(async()=>{let e=performance.now();await l.fetch();let a=performance.now();t?.("offline_cache.stale_while_revalidate",u,{...s,stale_visible_ms:Math.round(a-r),api_duration_ms:Math.round(a-e),total_ms:Math.round(a-_)})})():t?.("offline_cache.cache_hit",u,s)});if(void 0!==e)return Promise.resolve(e)}let f=performance.now(),E=await r(s),h=Math.round(performance.now()-f);return d||t?.("offline_cache.cache_miss",u,{api_duration_ms:h,total_ms:Math.round(performance.now()-_)}),null!=e&&a.jG.schedule(()=>{c(l)}),Promise.resolve(E)},persistQuery:c,persistQueryByKey:s,retrieveQuery:o,persisterGc:async function(){if(e?.entries)for(let[t,r]of(await e.entries()))t.startsWith(n)&&e.isBustedOrExpired(r)&&await e.removeItem(t)},restoreQueries:async function(t){if(e?.entries){for(let[r,a]of(await e.entries()))if(r.startsWith(n)){if(e.isBustedOrExpired(a)){await e.removeItem(r);continue}t.setQueryData(a.queryKey,a.state.data,{updatedAt:a.state.dataUpdatedAt})}}}}}({storage:(0,n.i5)({validator:e,sendAnalyticsEvent:t}),sendAnalyticsEvent:t,prefix:r,maxAgeMs:s,refetchOnRestore:!c||"always"}).persisterFn:o},80798(e,t,r){r.d(t,{Zf:()=>s,i5:()=>h,mW:()=>m});var a=r(77783),n=r(21927),i=r(28926),o=r(23131);let s={CACHE_HIT:"offline_cache.cache_hit",CACHE_MISS:"offline_cache.cache_miss",CACHE_EVICT:"offline_cache.cache_evict",CACHE_INVALID:"offline_cache.stale_structure",CACHE_EXPIRED:"offline_cache.expired_item",CACHE_SET:"offline_cache.cache_set",CACHE_TIMEOUT:"offline_cache.cache_timeout",CACHE_SESSION_DISABLED:"offline_cache.session_disabled",CACHE_READ_ERROR:"offline_cache.read_error",CACHE_EVICT_ERROR:"offline_cache.evict_error",CACHE_WRITE_ERROR:"offline_cache.write_error",CLEANUP_STARTED:"offline_cache.cleanup_started",CLEANUP_COMPLETED:"offline_cache.cleanup_completed",CLEANUP_ERROR:"offline_cache.cleanup_error",CLEANUP_ITEM_ERROR:"offline_cache.cleanup_item_error",ENTRIES_READ:"offline_cache.entries_read",ANY:"offline_cache.*",NONE:"offline_cache.none"},c=!1;function l(e){if(!(e instanceof Error))return!1;if("u">typeof DOMException&&e instanceof DOMException&&"name"in e){let t=e.name;return"SecurityError"===t||"UnknownError"===t||"AbortError"===t||"QuotaExceededError"===t||"NotFoundError"===t||"VersionError"===t}return!1}function u(){try{return"u">typeof globalThis&&void 0!==globalThis.indexedDB}catch{return!1}}let d=class IndexedDbTimeoutError extends Error{constructor(e,t,r){super(`IndexedDB ${e} operation timed out after ${r}ms for key: ${t}`),this.name="IndexedDbTimeoutError"}},_="offline_cache::",f=()=>_+(0,n.cj)(),E=new Map;function h({validator:e,sendAnalyticsEvent:t,storeName:r="queries"}){let n,_=`${f()}:${r}`,h=E.get(_);if(h)return h;function m(e){return!!(!e||!e.state||e.state.dataUpdatedAt&&e.state.ttl&&Date.now()-e.state.dataUpdatedAt>e.state.ttl)||void 0!==e.state.cacheVersion&&1!==e.state.cacheVersion}try{n=(0,a.y$)(f(),r)}catch(e){l(e)&&(c=!0,t(s.CACHE_SESSION_DISABLED,"",{reason:"fatal_error_on_init",error_name:e.name}))}function C(){return(0,o.G7)("disable-indexdb-operations")||c}async function p(e,r,a,n){let i=null,o=new Promise((e,o)=>{i=setTimeout(()=>{t(s.CACHE_TIMEOUT,n,{operation:a}),o(new d(a,n,r))},r)});try{let t=await Promise.race([e,o]);return i&&clearTimeout(i),t}catch(e){throw i&&clearTimeout(i),e}}async function y(){if(A.isCleanupRunning)return;A.isCleanupRunning=!0;let e=Date.now();try{if(t(s.CLEANUP_STARTED,"",{}),!u())return;let r=await (0,a.jO)(n),i=r.length,o=0;for(let[e,i]of r)try{m(i)&&(t(s.CACHE_EVICT,e.toString(),{reason:"periodic_cleanup"}),(0,a.yH)(e,n).catch(r=>{t(s.CLEANUP_ITEM_ERROR,e.toString(),{error:String(r)})}),o++)}catch(r){t(s.CLEANUP_ITEM_ERROR,e.toString(),{error:String(r)})}t(s.CLEANUP_COMPLETED,"",{removed_count:o,total_entries:i,duration_ms:Date.now()-e})}catch(e){t(s.CLEANUP_ERROR,"",{error:String(e)})}finally{A.isCleanupRunning=!1}}let A={cleanupIntervalId:void 0,isCleanupRunning:!1,async getItem(r,i){if(C()||!u())return;let o=Date.now();try{let c=await p((0,a.Jt)(r,n),500,"read",r),l=Date.now()-o;if(!c?.state?.data)return void t(s.CACHE_MISS,r.toString(),{...i,read_duration_ms:l});if(m(c)){this.removeItem(r),t?.("offline_cache.expired_item",r.toString(),{...i,read_duration_ms:l});return}if(!e.Check(c.state.data))return void t(s.CACHE_INVALID,r.toString(),{...i,read_duration_ms:l});let u=c.state.dataUpdatedAt?Date.now()-c.state.dataUpdatedAt:"N/A",d=c.state.ttl??"N/A";return t(s.CACHE_HIT,r.toString(),{...i,age:u,ttl:d,preheat_source:c.state.preheatSource,read_duration_ms:l}),c}catch(a){let e=Date.now()-o;if(a instanceof d)return void t(s.CACHE_MISS,r.toString(),{...i,read_duration_ms:e,timeout:!0});if(l(a)){c=!0,t(s.CACHE_SESSION_DISABLED,r.toString(),{reason:"fatal_error",error_name:a.name,read_duration_ms:e}),t(s.CACHE_READ_ERROR,r.toString(),{...i,session_disabled:!0,error_name:a.name,read_duration_ms:e});return}throw a}},async setItem(e,r,o,_,f){if(C()||!u())return Promise.resolve();let E=_??r.state.ttl,h={...r,state:{...r.state,dataUpdatedAt:o??r.state.dataUpdatedAt,ttl:E,cacheVersion:1}};(0,i.D)(e,t),t(s.CACHE_SET,e.toString(),{...f,ttl:E});try{await p((0,a.hZ)(e,h,n),2e3,"write",e)}catch(r){if(r instanceof d)return;if(l(r)){c=!0,t(s.CACHE_SESSION_DISABLED,e.toString(),{reason:"fatal_error",error_name:r.name}),t(s.CACHE_WRITE_ERROR,e.toString(),{...f,session_disabled:!0,error_name:r.name});return}throw r}},async removeItem(e,r){if(t(s.CACHE_EVICT,e.toString(),r),u())return(0,a.yH)(e,n)},isBustedOrExpired:e=>m(e),async entries(){if(!u())return[];let e=Date.now(),r=await (0,a.jO)(n),i=Date.now()-e;return t(s.ENTRIES_READ,"",{duration_ms:i,entry_count:r.length}),r},cleanupExpiredEntries:y,stopPeriodicCleanup:function(){void 0!==A.cleanupIntervalId&&(clearInterval(A.cleanupIntervalId),A.cleanupIntervalId=void 0)}};return E.set(_,A),!function(e=36e5){let t;"u"<typeof window||("function"==typeof(t=window).requestIdleCallback?t.requestIdleCallback(()=>void y(),{timeout:1e4}):setTimeout(()=>void y(),1e4),A.cleanupIntervalId=window.setInterval(()=>void y(),e))}(),A}async function m(){if(u())try{let e=await globalThis.indexedDB?.databases?.();if(!e)return;let t=e.filter(e=>e.name?.startsWith(_)).map(async e=>{if(e.name)try{let t=globalThis.indexedDB.open(e.name,e.version),r=await new Promise((e,r)=>{t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error),t.onupgradeneeded=()=>{t.transaction?.abort(),r(Error("Unexpected upgrade needed"))}}),n=Array.from(r.objectStoreNames);r.close();let i=n.map(async t=>{if(e.name)try{let r=(0,a.y$)(e.name,t);await (0,a.IU)(r)}catch(e){if(l(e))return}});await Promise.all(i)}catch(e){if(l(e))return}});await Promise.allSettled(t)}catch{}}},28926(e,t,r){r.d(t,{D:()=>a});let a=async(e,t)=>{if(t&&"u">typeof navigator&&navigator.storage?.estimate)try{let r=await navigator.storage.estimate(),a=r.quota??0,n=r.usage??0;t("offline_cache.storage_space",e,{quota_bytes:a,usage_bytes:n,available_bytes:a-n,usage_percent:a>0?n/a*100:0})}catch{}}},64887(e,t,r){r.d(t,{d:()=>o});var a=r(5875),n=r(52246),i=r(96540);let o=(e,t,{leading:r=!1,maxWait:o,trailing:s=!0,onChangeBehavior:c="flush"}={})=>{let l=(0,a.M)(e),u=(0,i.useMemo)(()=>{let e=void 0===o?{leading:r,trailing:s}:{leading:r,trailing:s,maxWait:o};return(0,n.A)((...e)=>l.current(...e),t,e)},[l,t,r,o,s]);return(0,i.useEffect)(()=>()=>{u?.[c]()},[u,c]),u}}}]);
//# sourceMappingURL=99485-416c7ecee15962f3-c8bd9d4bebc59c6b.js.map