performance.mark("js-parse-end:13037-2297a248d80a2df0.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["13037"],{37244(e,i,t){t.d(i,{W:()=>N,B:()=>IssueTypeFilterProvider});var s,a,r,n,l,o,u,p,c,y,d,m=t(88243),h=t(16213),g=t(50467);let f={fragment:{argumentDefinitions:s=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"owner"}],kind:"Fragment",metadata:null,name:"IssueTypeFilterProviderIssueTypeQuery",selections:[{alias:null,args:a=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r=[{kind:"Literal",name:"first",value:100}],concreteType:"IssueTypeConnection",kind:"LinkedField",name:"issueTypes",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"issueTypes(first:100)"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:s,kind:"Operation",name:"IssueTypeFilterProviderIssueTypeQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r,concreteType:"IssueTypeConnection",kind:"LinkedField",name:"issueTypes",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[n,l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"issueTypes(first:100)"},l],storageKey:null}]},params:{id:"deecf4e5b9723fe1e223989471673f53",metadata:{},name:"IssueTypeFilterProviderIssueTypeQuery",operationKind:"query",text:null}};f.hash="015cbd12b22f8ce7578562a617177773";let k={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"IssueTypeFilterProviderViewerIssueTypeQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"suggestedIssueTypeNames",storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"IssueTypeFilterProviderViewerIssueTypeQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"58ebbad60258ea0c9eb795e67cc2b575",metadata:{},name:"IssueTypeFilterProviderViewerIssueTypeQuery",operationKind:"query",text:null}};k.hash="765a25834ce6bc541a1d98b6355cf514";let v={fragment:{argumentDefinitions:u=[{defaultValue:null,kind:"LocalArgument",name:"login"},{defaultValue:null,kind:"LocalArgument",name:"number"}],kind:"Fragment",metadata:null,name:"IssueTypeFilterProviderProjectIssueTypeQuery",selections:[{alias:null,args:p=[{kind:"Variable",name:"login",variableName:"login"}],concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[{alias:null,args:c=[{kind:"Variable",name:"number",variableName:"number"}],concreteType:"ProjectV2",kind:"LinkedField",name:"projectV2",plural:!1,selections:[y={alias:null,args:null,kind:"ScalarField",name:"suggestedIssueTypeNames",storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:u,kind:"Operation",name:"IssueTypeFilterProviderProjectIssueTypeQuery",selections:[{alias:null,args:p,concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[{alias:null,args:c,concreteType:"ProjectV2",kind:"LinkedField",name:"projectV2",plural:!1,selections:[y,d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},d],storageKey:null}]},params:{id:"4ecab7512fd17375c718ee060e7c9130",metadata:{},name:"IssueTypeFilterProviderProjectIssueTypeQuery",operationKind:"query",text:null}};v.hash="54031af5ea97af051011bdae3b3dc9af";var T=t(86398),b=t(76390),S=t(21201),I=t(92688),V=t(91271),F=t(38621),w=t(91385),P=t(18312),q=t(69487);let K=[{value:"issue",displayName:"Issue",priority:1,icon:F.IssueOpenedIcon},{value:"pr",displayName:"Pull Request",priority:2,icon:F.GitPullRequestIcon}],N={displayName:"Type",key:"type",priority:T.a6,icon:F.IssueOpenedIcon,description:"Specify the type of issue to search for"};var _=new WeakSet,L=new WeakSet,j=new WeakSet;let IssueTypeFilterProvider=class IssueTypeFilterProvider extends b.kr{async getSuggestions(e,i,t,s){let a=(0,S.DS)(i,s),r=await this.processSuggestions(e,i,(0,m._)(this,_,E).bind(this),s)||[],n=[];if((0,S.uT)(i)&&this.options.filterTypes.valueless&&!i.raw.startsWith("-")){let e=(0,S.jL)(this.displayName,this.icon);n.push(e)}if((0,S.uT)(i)&&this.options.filterTypes.hasValue&&!i.raw.startsWith("-")){let e=(0,S.Ms)(this.displayName,this.icon);n.push(e)}for(let e of r){let{value:i,displayName:t}=e,s=(0,S.I8)(i),r=!!s&&(0,w.qA)(a,s),l=!!t&&(0,w.qA)(a,t);s&&(r||l)&&(e.priority-=(0,V.dt)(a,s),n.push(e))}return n}async fetchSuggestions(e,i){if(!i)return[];try{if(this.relayEnvironment&&this.requestVariables&&this.repositoryScope){let e=await (0,P.fetchQuery)(this.relayEnvironment,f,this.requestVariables,{fetchPolicy:"store-or-network"}).toPromise(),i=e?.repository?.issueTypes?.edges||[],t=[];for(let e of i)e&&e.node&&e.node.name&&t.push({name:e.node.name});return t}if(this.relayEnvironment&&this.requestVariables&&this.projectScope){let e=await (0,P.fetchQuery)(this.relayEnvironment,v,this.requestVariables,{fetchPolicy:"store-or-network"}).toPromise(),i=e?.organization?.projectV2?.suggestedIssueTypeNames||[];return i?.map(e=>({name:e}))}if(this.relayEnvironment&&!this.projectScope&&!this.repositoryScope){let e=await (0,P.fetchQuery)(this.relayEnvironment,k,{},{fetchPolicy:"store-or-network"}).toPromise(),i=e?.viewer?.suggestedIssueTypeNames||[];return i?.map(e=>({name:e}))}}catch{}return[]}async validateFilterValue(e){try{if(this.relayEnvironment&&this.requestVariables&&this.repositoryScope){let i=await (0,P.fetchQuery)(this.relayEnvironment,f,this.requestVariables,{fetchPolicy:"store-or-network"}).toPromise(),t=i?.repository?.issueTypes?.edges||[],s=[];for(let e of t)e&&e.node&&e.node.name&&s.push({name:e.node.name});return s.find(i=>(0,S.SH)(i.name,e))}if(this.relayEnvironment&&this.requestVariables&&this.projectScope)return{name:e};if(this.relayEnvironment){let i=await (0,P.fetchQuery)(this.relayEnvironment,k,{},{fetchPolicy:"store-or-network"}).toPromise(),t=i?.viewer?.suggestedIssueTypeNames||[];return{name:t?.find(i=>(0,S.SH)(i,e))}}}catch{}return null}validateValue(e,i,t){let s=(0,S.M5)(i.value),a=this.legacy?[...K.map(({value:e})=>e),t?.name]:[t?.name];return 0!==a.length&&!!s&&!!a.find(e=>(0,S.SH)(e,s))&&{value:(0,S.$4)(s)??"",displayName:s}}async processSuggestions(e,i,t,s){if(!this.shouldGetSuggestions(i))return null;let a=(0,S.DS)(i,s),r=await this.fetchSuggestions(a,i)??[];return[...this.legacy?K.map(e=>({...e,ariaLabel:`${e.displayName}, ${this.displayName}`})):[],...r.map(i=>t(i,a,e))]}getValueRowProps(e){return{text:e.displayName??(0,S.I8)(e.value)??"",leadingVisual:(0,I.d)({value:e,providerIcon:this.icon})}}rankSuggestion(e,i){let{displayName:t}=i,s=3;return e&&t&&(s-=(0,V.dt)(e,t)),{...i,priority:s}}constructor(e,i=!1,t,s,a){super(N,{...e,filterTypes:{...e?.filterTypes,multiValue:!0}}),(0,h._)(this,_),(0,h._)(this,L),(0,h._)(this,j),(0,g._)(this,"filterValues",void 0),(0,g._)(this,"relayEnvironment",void 0),(0,g._)(this,"repositoryScope",void 0),(0,g._)(this,"projectScope",void 0),(0,g._)(this,"owner",void 0),(0,g._)(this,"repo",void 0),(0,g._)(this,"legacy",void 0),(0,g._)(this,"requestVariables",void 0),(0,g._)(this,"requestDisposable",void 0),this.type=T.CH.Text,this.relayEnvironment=t,this.repositoryScope=s,this.projectScope=a,this.requestVariables=(0,m._)(this,L,Q).call(this),this.requestDisposable=(0,m._)(this,j,D).call(this),this.legacy=i}};function E(e,i){let{name:t}=e;return this.rankSuggestion(i,{type:T.ak.Value,displayName:t,ariaLabel:`${t}, ${this.displayName}`,value:(0,S.$4)(t)??"",inlineDescription:!0,icon:this.icon})}function Q(){if(this.repositoryScope){let e=this.repositoryScope.split("/");return{owner:e[0]||"",name:e[1]||""}}if(this.projectScope?.login&&this.projectScope?.projectNumber)return{login:this.projectScope.login,number:this.projectScope.projectNumber}}function D(){if(this.relayEnvironment)if(this.requestVariables&&this.repositoryScope){let e=(0,q.getRequest)(f),i=(0,q.createOperationDescriptor)(e,this.requestVariables);return this.relayEnvironment.retain(i)}else if(this.requestVariables&&this.projectScope){let e=(0,q.getRequest)(v),i=(0,q.createOperationDescriptor)(e,this.requestVariables);return this.relayEnvironment.retain(i)}else{let e=(0,q.getRequest)(k),i=(0,q.createOperationDescriptor)(e,{});return this.relayEnvironment.retain(i)}}}}]);
//# sourceMappingURL=13037-2297a248d80a2df0-2d53cf1f550715dd.js.map