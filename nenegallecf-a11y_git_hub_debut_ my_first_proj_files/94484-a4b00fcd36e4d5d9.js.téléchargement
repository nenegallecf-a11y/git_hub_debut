performance.mark("js-parse-end:94484-a4b00fcd36e4d5d9.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["94484"],{7686(e,t,n){n.d(t,{b:()=>S});var a=n(74848),r=n(16522),l=n(45596),s=n(21373),i=n(18990),o=n(73077),c=n(38621),u=n(83228),d=n(91589),m=n(23131),h=n(87571),g=n(11544),p=n(63171);function b(e){let t,n,l,s=(0,r.c)(12),{topLevelAgents:o,customAgents:c,selectedAgent:u,onSelectAgent:d}=e;return s[0]!==d||s[1]!==u||s[2]!==o?(t=o.length>0&&(0,a.jsxs)(i.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(i.l.GroupHeading,{children:"Agents"}),o.map(e=>{let t=(0,p.sS)(e.slug),n=u?.typeName==="topLevel"&&u.topLevelAgentId===e.id,r=!u?.typeName&&t,l=n||r;return(0,a.jsxs)(i.l.Item,{disabled:!1,selected:l,onSelect:()=>d(l?{}:{typeName:"topLevel",topLevelAgentId:e.id}),children:[(0,a.jsx)(i.l.LeadingVisual,{children:(0,a.jsx)(g.r,{src:e.avatar_url||"",size:16,square:!0})}),e.display_name]},e.id)})]}),s[0]=d,s[1]=u,s[2]=o,s[3]=t):t=s[3],s[4]!==c||s[5]!==d||s[6]!==u||s[7]!==o.length?(n=c.length>0&&(0,a.jsxs)(a.Fragment,{children:[o.length>0&&(0,a.jsx)(i.l.Divider,{}),(0,a.jsxs)(i.l.Group,{selectionVariant:"single",children:[(0,a.jsx)(i.l.GroupHeading,{children:"Custom agents"}),c.map(e=>{let t=!!e.config_error&&e.config_error.length>0,n=u.subAgentSlug===e.name;return(0,a.jsx)(i.l.Item,{disabled:t,inactiveText:t?e.config_error:void 0,selected:n,onSelect:()=>d(n?{}:{typeName:"customSubAgent",subAgentSlug:e.name}),children:e.display_name||e.name},e.name)})]})]}),s[4]=c,s[5]=d,s[6]=u,s[7]=o.length,s[8]=n):n=s[8],s[9]!==t||s[10]!==n?(l=(0,a.jsxs)(a.Fragment,{children:[t,n]}),s[9]=t,s[10]=n,s[11]=l):l=s[11],l}b.displayName="AgentListItems";var f=n(5024),y=n(62551),_=n(34164),v=n(96540);function S(e){let t,n,o,S,A,C,w,j,N,L,k,O,T,E=(0,r.c)(50),{repo:R,branch:P,selectedAgent:B,onSelectAgent:$,iconOnly:G,disabled:F,buttonProps:q}=e,W=void 0===G||G,V=void 0!==F&&F;E[0]!==R?(t={repo:R},E[0]=R,E[1]=t):t=E[1];let{data:D,isLoading:Q}=function(e){let t,n,a=(0,r.c)(4),{repo:l}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.G7)("agent_session_retry_fetch_capi_on_401"),a[0]=t):t=a[0];let s=t;return a[1]!==l.nameOnly||a[2]!==l.owner?(n={queryKey:["custom-agents",l.owner,l.nameOnly],queryFn:async()=>{try{let e=await (0,u.I)({path:`/agents/swe/custom-agents/${l.owner}/${l.nameOnly}`,retryOn401:s});if(404===e.status)return[];return(await e.json()).agents}catch{return[]}}},a[1]=l.nameOnly,a[2]=l.owner,a[3]=n):n=a[3],(0,d.b)(n)}(t);E[2]!==D?(n=void 0===D?[]:D,E[2]=D,E[3]=n):n=E[3];let M=n,{data:K,isLoading:U}=(0,h.n)(R.nameWithOwner);E[4]!==K?(o=void 0===K?[]:K,E[4]=K,E[5]=o):o=E[5];let H=o,z=R.isEmpty||!P||Q||U;E[6]!==M||E[7]!==H?(S=[...H,...M],E[6]=M,E[7]=H,E[8]=S):S=E[8];let Y=S;E[9]!==Y||E[10]!==z||E[11]!==$||E[12]!==B?(C=()=>{z||0===Y.length||!B?.typeName||("topLevel"===B.typeName?Y.some(e=>"id"in e&&e.id===B.topLevelAgentId):Y.some(e=>"name"in e&&e.name===B.subAgentSlug))||$({})},A=[z,Y,B,$],E[9]=Y,E[10]=z,E[11]=$,E[12]=B,E[13]=A,E[14]=C):(A=E[13],C=E[14]),(0,v.useEffect)(C,A);let J=x,X=J(B)?"Copilot":B,Z="string"==typeof X?"Copilot"===X?"topLevel":"customSubAgent":X.typeName;if(E[15]!==Z||E[16]!==Y||E[17]!==P||E[18]!==q||E[19]!==V||E[20]!==X||E[21]!==W||E[22]!==z||E[23]!==R||E[24]!==B){let e,t,n,r,i,o,u=Y.find(e=>"string"==typeof X?e.display_name===X:"topLevel"===Z?"id"in e&&e.id===X.topLevelAgentId:"customSubAgent"===Z?"name"in e&&e.name===X.subAgentSlug:void 0);e:{if("string"==typeof X){e=X;break e}if(!u){e=void 0;break e}e=u.display_name||("name"in u?u.name:void 0)}let d=e;if(E[29]!==P||E[30]!==R.nameOnly||E[31]!==R.owner){let e=new URLSearchParams({filename:".github/agents/my-agent.agent.md",value:"---\n# Fill in the fields below to create a basic custom agent for your repository.\n# The Copilot CLI can be used for local testing: https://gh.io/customagents/cli\n# To make this agent available, merge this file into the default repository branch.\n# For format details, see: https://gh.io/customagents/config\n\nname:\ndescription:\n---\n\n# My Agent\n\nDescribe what your agent does here..."});t=R.owner,n=R.nameOnly,r=P,i=e.toString(),E[29]=P,E[30]=R.nameOnly,E[31]=R.owner,E[32]=t,E[33]=n,E[34]=r,E[35]=i}else t=E[32],n=E[33],r=E[34],i=E[35];N=`/${t}/${n}/new/${r}?${i}`;t:{if(J(B)){o=!0;break t}if("topLevel"===B.typeName&&u&&"slug"in u){o=(0,p.sS)(u.slug);break t}o=!1}let m=o,h=d||"None",b=d?`${"topLevel"===Z?"Agent":"Custom agent"}: ${d}`:"Select an agent";j=l.W,w=l.W.Anchor,L=W?function({isLoading:e,isCopilotSelected:t,selectedAgentObj:n,agentType:r,ariaLabel:l,disabled:i,variant:o,className:u}){return e?(0,a.jsx)(s.Q,{"aria-label":"Loading agents",disabled:!0,variant:o,className:(0,_.$)("AgentSelector-module__avatarButtonSkeleton__rqxLr_t",u),children:(0,a.jsx)(f.f,{width:"32px",height:"32px","data-testid":"agent-selector-skeleton"})}):t?(0,a.jsx)(y.L,{icon:c.CopilotIcon,selectedIcon:c.CopilotIcon,"aria-label":l,selected:!1,disabled:i,variant:o,className:u}):n&&"object"==typeof n&&"customSubAgent"===r?(0,a.jsx)(y.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:i,variant:o,className:u}):n&&"object"==typeof n&&"avatar_url"in n?(0,a.jsx)(s.Q,{"aria-label":l,disabled:i||e,variant:o,className:(0,_.$)("AgentSelector-module__avatarButton__euwXZTA",u),children:(0,a.jsx)(g.r,{src:n.avatar_url,size:18,square:!0})}):(0,a.jsx)(y.L,{icon:c.CopilotIcon,selectedIcon:c.FileCheckIcon,"aria-label":l,selected:!!n,disabled:i,variant:o,className:u})}({isLoading:z,isCopilotSelected:m,selectedAgentObj:u,agentType:Z,ariaLabel:b,disabled:V,variant:q?.variant,className:q?.className}):(0,a.jsx)(s.Q,{leadingVisual:d?c.FileCheckIcon:c.CopilotIcon,trailingAction:c.TriangleDownIcon,"aria-label":b,className:"AgentSelector-module__anchor__iLtsoes","data-selected":!!u,disabled:V||z,...q,children:h}),E[15]=Z,E[16]=Y,E[17]=P,E[18]=q,E[19]=V,E[20]=X,E[21]=W,E[22]=z,E[23]=R,E[24]=B,E[25]=w,E[26]=j,E[27]=N,E[28]=L}else w=E[25],j=E[26],N=E[27],L=E[28];return E[36]!==w||E[37]!==L?(k=(0,a.jsx)(w,{children:L}),E[36]=w,E[37]=L,E[38]=k):k=E[38],E[39]!==Y.length||E[40]!==M||E[41]!==N||E[42]!==$||E[43]!==B||E[44]!==H?(O=(0,a.jsx)(l.W.Overlay,{width:"auto",children:0===Y.length?(0,a.jsx)(I,{newFileUrl:N}):(0,a.jsxs)(i.l,{children:[(0,a.jsx)(b,{topLevelAgents:H,customAgents:M,selectedAgent:B,onSelectAgent:$}),(0,a.jsx)(i.l.Divider,{}),(0,a.jsx)(i.l.Group,{selectionVariant:!1,children:(0,a.jsxs)(i.l.LinkItem,{href:N,target:"_blank",children:[(0,a.jsx)(i.l.LeadingVisual,{children:(0,a.jsx)(c.PlusIcon,{})}),"Create a custom agent"]})})]})}),E[39]=Y.length,E[40]=M,E[41]=N,E[42]=$,E[43]=B,E[44]=H,E[45]=O):O=E[45],E[46]!==j||E[47]!==k||E[48]!==O?(T=(0,a.jsxs)(j,{children:[k,O]}),E[46]=j,E[47]=k,E[48]=O,E[49]=T):T=E[49],T}function x(e){return!e?.typeName}S.displayName="AgentSelector";let I=e=>{let t,n,l,s=(0,r.c)(4),{newFileUrl:i}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("h3",{className:"AgentSelector-module__emptyStateTitle__gDsYP51",children:"This repository has no custom agents"}),n=(0,a.jsx)("p",{className:"AgentSelector-module__emptyStateDescription___L4eWsY",children:"Custom agents are reusable instructions and tools in your repository."}),s[0]=t,s[1]=n):(t=s[0],n=s[1]),s[2]!==i?(l=(0,a.jsxs)("div",{className:"AgentSelector-module__emptyStateContainer__RlGV94A",children:[t,n,(0,a.jsx)(o.z,{href:i,children:"Create a custom agent"})]}),s[2]=i,s[3]=l):l=s[3],l};I.displayName="EmptyState"},24647(e,t,n){n.d(t,{Fn:()=>o,eS:()=>i});var a=n(74848),r=n(16522),l=n(96540);let s=(0,l.createContext)(void 0);function i(){let e=(0,l.use)(s);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function o(e){let t,n,i,o,u=(0,r.c)(7),{children:d}=e,[m,h]=(0,l.useState)(0);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>h(c),n=()=>h(0),u[0]=t,u[1]=n):(t=u[0],n=u[1]),u[2]!==m?(i={numberOf401s:m,increment401s:t,reset401s:n},u[2]=m,u[3]=i):i=u[3];let g=i;return u[4]!==d||u[5]!==g?(o=(0,a.jsx)(s,{value:g,children:d}),u[4]=d,u[5]=g,u[6]=o):o=u[6],o}function c(e){return e+1}s.displayName="ConsecutiveCAPI401sContext",o.displayName="ConsecutiveCAPI401sProvider"},39239(e,t,n){n.d(t,{s:()=>s});var a=n(16522),r=n(96540),l=n(65036);function s(){let e,t,n,s=(0,a.c)(7),{value:i,setValue:o}=(0,l.Q)("AGENT_SESSIONS_LAST_SELECTED_AGENT");s[0]!==i?(e=()=>i??{},s[0]=i,s[1]=e):e=s[1];let[c,u]=(0,r.useState)(e);s[2]!==o?(t=e=>{u(e),o(e)},s[2]=o,s[3]=t):t=s[3];let d=t;return s[4]!==c||s[5]!==d?(n=[c,d],s[4]=c,s[5]=d,s[6]=n):n=s[6],n}},91589(e,t,n){n.d(t,{b:()=>o});var a=n(97286),r=n(83228),l=n(24647),s=n(33755),i=n(96540);function o(...e){let t=(0,a.I)(...e),{numberOf401s:n,increment401s:c,reset401s:u}=(0,l.eS)(),{isError:d,isLoading:m,error:h}=t,g=(0,i.useRef)(null);return(0,i.useEffect)(()=>{d&&h instanceof r.Y&&401===h.status?g.current!==h&&(n>=5?((0,s.fM)().tryRefreshToken(),g.current=h,u()):(g.current=h,c())):d||m||!(n>0)?d||(g.current=null):(g.current=null,u())},[d,m,h,c,u,n]),t}},65036(e,t,n){n.d(t,{Q:()=>l});var a=n(68439),r=n(96540);function l(e){let t=(0,a.D)("localStorage");return{value:(0,r.useMemo)(()=>t.getItem(e)??void 0,[t,e]),setValue:n=>{t.setItem(e,n)},removeItem:()=>{t.removeItem(e)}}}},87571(e,t,n){n.d(t,{n:()=>l});var a=n(68695),r=n(97286);function l(e){return(0,r.I)({enabled:!!e,queryKey:["top-level-agents",e],queryFn:async()=>{try{if(!e)return[];let t=await (0,a.lS)(`/copilot/agent-sessions/${e}/agents`);if(!t.ok)return[];return(await t.json()).agents||[]}catch{return[]}}})}},63171(e,t,n){function a(e){return"copilot-swe-agent"===e}function r(e,t){return!e.topLevelAgentId||a(t)||!!e.subAgentSlug}n.d(t,{CF:()=>r,sS:()=>a})},83228(e,t,n){n.d(t,{I:()=>o,Y:()=>FetchCAPIError});var a=n(50467),r=n(33755),l=n(22437),s=n(21927),i=n(23131);let FetchCAPIError=class FetchCAPIError extends Error{constructor(e,t){super(e),(0,a._)(this,"status",void 0),this.name="FetchCAPIError",this.status=t}};async function o({path:e,method:t="GET",streamingResponse:n=!1,body:a,retryOn401:l,copilotApiUrl:o}){let u=(0,r.fM)();return c({path:e,method:t,streamingResponse:n,body:a,basePath:o??(0,s._$)().copilotApiOverrideUrl??"https://api.githubcopilot.com",retryOn401:l??(0,i.G7)("mission_control_retry_on_401")},u)}async function c(e,t,n=0){let a=await t.getAuthToken();if(!a)throw Error("No token available");let r=await (0,l.p)({authToken:a,basePath:e.basePath,method:e.method,path:e.path,streamingResponse:e.streamingResponse,body:e.body});if(!r.ok){if(e.retryOn401&&401===r.status&&n<1)return await t.tryRefreshToken()||t.removeLocalStorageAuthToken(),c(e,t,n+1);let a="error"in r?r.error:`Failed CAPI request (${r.status})`;if("response"in r&&r.response)try{let e=await r.response.text();e&&e.trim()&&(a=e.trim())}catch{}throw new FetchCAPIError(a,r.status)}return r}},33755(e,t,n){n.d(t,{fM:()=>l});var a=n(1695);let r=null;function l(){return r||(r=new AgentSessionsTokenProvider),r}let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends a.JR{async validateAuthToken(e){return e.ssoChanged(this.ssoOrgIDs)||e.isExpired?this.fetchAuthToken():e}async tryRefreshToken(){if(this.isUnlicensed)return!1;try{return await this.fetchAuthToken(!0),!0}catch{return!1}}constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},62551(e,t,n){n.d(t,{L:()=>i});var a=n(74848),r=n(16522),l=n(26108),s=n(34164);let i=e=>{let t,n,i,o,c,u,d,m=(0,r.c)(14);if(m[0]!==e){let{ref:a,...r}=e;i=a;let{selected:d,icon:h,selectedIcon:g,...p}=r;t=(o=d)&&g?g:h,n=l.K,c=p,u=(0,s.$)("IconButtonSelector-module__anchor__oRPQC_J",p.className),m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=o,m[5]=c,m[6]=u}else t=m[1],n=m[2],i=m[3],o=m[4],c=m[5],u=m[6];return m[7]!==t||m[8]!==n||m[9]!==i||m[10]!==o||m[11]!==c||m[12]!==u?(d=(0,a.jsx)(n,{...c,className:u,icon:t,"data-selected":o,ref:i}),m[7]=t,m[8]=n,m[9]=i,m[10]=o,m[11]=c,m[12]=u,m[13]=d):d=m[13],d};i.displayName="IconButtonSelector",i.displayName="IconButtonSelector"},89933(e,t,n){n.d(t,{P:()=>S,s:()=>_});var a=n(74848),r=n(16522),l=n(7686),s=n(24647),i=n(23131),o=n(48693),c=n(62466),u=n(68695),d=n(38621),m=n(5024),h=n(26108),g=n(96540),p=n(9715),b=n(69140),f=n(62551);let y="RepoBranchAgentSelector-module__invisibleSelectorButton__APco0mv",_=e=>{let t,n,u,_,I,A,C,w=(0,r.c)(31),{hideRepoSelector:j,initialRepoNWO:N,initialBranch:L,selectedRepo:k,selectedBranch:O,selectedAgent:T,onRepoSelect:E,onBranchSelect:R,onAgentSelect:P,agentSelectionEnabled:B,iconOnly:$}=e,G=void 0===B||B,F=void 0!==$&&$,q=(0,g.useRef)(!1);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.G7)("swe_agent_member_requests_agent_panel"),w[0]=t):t=w[0];let W=t;w[1]!==L||w[2]!==N||w[3]!==R||w[4]!==E||w[5]!==k?(n=e=>{let t;if(!k&&!q.current){if(N&&(t=e.find(e=>e.nameWithOwner===N))&&(t.enabled||W&&v(t))){E(t),R(L||t.defaultBranch),q.current=!0;return}let n=b.Jt.getLastUsedRepository();if(n){let t=e.find(e=>e.nameWithOwner===`${n.ownerLogin}/${n.name}`);if(t&&(t.enabled||W&&v(t))){E(t),R(t?.defaultBranch),q.current=!0;return}}let a=e.find(x);a?(E(a),R(a.defaultBranch),q.current=!0):t&&(E(t),R(L||t.defaultBranch),q.current=!0)}},w[1]=L,w[2]=N,w[3]=R,w[4]=E,w[5]=k,w[6]=n):n=w[6];let V=n;w[7]!==N?(u=(e,t)=>S(e,t,N),w[7]=N,w[8]=u):u=w[8];let D=u;return w[9]!==j||w[10]!==F||w[11]!==R||w[12]!==V||w[13]!==E||w[14]!==D||w[15]!==k?(_=!j&&(0,a.jsx)(c.P,{repositoryLoader:D,selectionVariant:"single",iconOnly:p.W.askModeDropdown&&F,responsiveStyle:p.W.askModeDropdown?"icon-on-mobile":"full",selectAllOption:!1,onSelect:e=>{e&&(E(e),R(e.defaultBranch))},currentSelection:k,width:"medium",additionalButtonProps:{"aria-label":`Repository: ${k?.nameWithOwner||"Select repository"}`,className:"RepoBranchAgentSelector-module__repoSelectorButton__Iu1Gp8E",variant:"invisible"},onLoad:V,loadingElement:(0,a.jsx)(m.f,{width:"150px",height:"32px"})}),w[9]=j,w[10]=F,w[11]=R,w[12]=V,w[13]=E,w[14]=D,w[15]=k,w[16]=_):_=w[16],w[17]!==R||w[18]!==O||w[19]!==k?(I=(0,a.jsx)(a.Fragment,{children:k?(0,a.jsx)(o.PI,{cacheKey:"repo-branch-agent-selector",canCreate:!1,currentCommitish:O??k.defaultBranch,defaultBranch:k.defaultBranch,owner:k.owner,repo:k.nameOnly,types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,actionListHeadingText:"Select a branch",onSelectItem:R,renderAnchor:e=>(0,a.jsx)(f.L,{...e,icon:d.GitBranchIcon,selectedIcon:d.GitBranchCheckIcon,selected:O!==k.defaultBranch,"aria-label":`Branch: ${O||"Select branch"}`,"aria-labelledby":void 0,variant:"invisible",className:y})}):(0,a.jsx)(h.K,{icon:d.GitBranchIcon,"aria-label":"Loading branches\u2026",disabled:!0})}),w[17]=R,w[18]=O,w[19]=k,w[20]=I):I=w[20],w[21]!==G||w[22]!==P||w[23]!==T||w[24]!==O||w[25]!==k?(A=G&&(k?(0,a.jsx)(l.b,{repo:k,branch:O||k.defaultBranch,selectedAgent:T,onSelectAgent:e=>P(e),iconOnly:!0,buttonProps:{variant:"invisible",className:y}}):(0,a.jsx)(m.f,{width:"32px",height:"32px"})),w[21]=G,w[22]=P,w[23]=T,w[24]=O,w[25]=k,w[26]=A):A=w[26],w[27]!==_||w[28]!==I||w[29]!==A?(C=(0,a.jsx)(s.Fn,{children:(0,a.jsxs)("div",{className:"RepoBranchAgentSelector-module__container__ubif3OE",children:[_,I,A]})}),w[27]=_,w[28]=I,w[29]=A,w[30]=C):C=w[30],C};function v(e){return!!(e.userCanRequestCca||e.userCanGrantOrgCca||e.userCanGrantEnterpriseCca||e.userHasRequestedCca)}async function S(e="",t,n){let a=new URL("/copilot/agent-sessions/repositories",window.location.origin);e.trim()&&a.searchParams.set("q",e.trim()),t&&a.searchParams.set("defaultOwner",t),n&&a.searchParams.set("includeInTopRepos",n);let r=await (0,u.lS)(a.href);if(r.ok){let{repositories:e}=await r.json();return e.map(e=>({id:e.id,graphQLId:e.graphQLId,nameWithOwner:e.nameWithOwner,enabled:e.enabled,name:e.nameWithOwner,nameOnly:e.name,owner:e.owner,defaultBranch:e.defaultBranch,private:"public"!==e.visibility,isEmpty:e.isEmpty,userHasRequestedCca:e.userHasRequestedCca,userCanRequestCca:e.userCanRequestCca,userCanGrantOrgCca:e.userCanGrantOrgCca,userCanGrantEnterpriseCca:e.userCanGrantEnterpriseCca,businessSlug:e.businessSlug}))}return[]}function x(e){return e.enabled}_.displayName="RepoBranchAgentPicker"},62466(e,t,n){n.d(t,{P:()=>m});var a=n(74848),r=n(96540),l=n(38621),s=n(9141),i=n(26108),o=n(21373),c=n(39775),u=n(35973);let d="ReposSelector-module__invisibleWithBorder__Iu2seUl";function m({currentSelection:e,repositoryLoader:t,onSelect:n,selectionVariant:m,selectAllOption:h,additionalButtonProps:g,buttonText:p="",width:b,truncateMaxWidth:f,height:y,fullscreenOnNarrow:_,defaultOwner:v,onLoad:S,loadingElement:x,liveSelection:I=!1,onOpen:A,responsiveStyle:C="full",iconOnly:w=!1,anchorSide:j,tooltipDirection:N}){let[L,k]=(0,r.useState)(""),[O,T]=(0,r.useState)([]),[E,R]=(0,r.useState)(!0),[P,B]=(0,r.useState)(!1),$=(0,r.useEffectEvent)(async e=>{try{let n=await t(e,v);T(n),S?.(n)}catch{}R(!1),B(!0)});(0,r.useEffect)(()=>{R(!0);let e=setTimeout(()=>{$(L)},200);return()=>clearTimeout(e)},[L]);let G=(0,r.useCallback)(e=>{"single"===m?!e[0]||e[0]._all?n(void 0):n(e[0]):n(e)},[m,n]),F=(0,r.useMemo)(()=>"multiple"===m?e||[]:e?[e]:[],[m,e]),q=(0,r.useCallback)(e=>{let t,n="medium"===b?35:"large"===b?60:24;return(e.name.length>n&&(t=`${e.name.substring(0,n)}...`),e._all)?{id:e.name,text:"All repositories",source:e,groupId:"all"}:{id:e.name,text:t||e.name,source:e,groupId:"select",disabled:!1===e.enabled,leadingVisual:()=>e.private?(0,a.jsx)(l.RepoLockedIcon,{size:16}):(0,a.jsx)(l.RepoIcon,{size:16})}},[b]),W=(0,r.useCallback)(e=>e.name,[]),V=(0,r.useMemo)(()=>{let e=[];return e.push(...O),h&&e.push({name:"$all$",_all:!0}),e},[O,h]),D=p,Q=l.RepoIcon;D||("multiple"===m?D=F.length>0?`${F.length} repositor${F.length>1?"ies":"y"}`:"Select repositories":F.length>0&&F[0]?(D=F[0].name,Q=F[0].private?l.RepoLockedIcon:l.RepoIcon):D=h?"All repositories":"Select a repository");let M=(0,s.tv)("icon-on-mobile"===C?{narrow:!0}:{narrow:!1},!1),K=w||M;return x&&E&&!e&&!P?x:(0,a.jsx)(u.O,{renderAnchor:({"aria-labelledby":e,...t})=>{let{"aria-label":n,...r}=t,s=g?.["aria-label"]??n??D;return K?(0,a.jsx)(i.K,{variant:"invisible",...e?{"aria-labelledby":e}:{"aria-label":s},icon:g?.leadingVisual||Q,...r,className:`${d}${F.length?" ReposSelector-module__selected__AyXSCQ_":""}`,tooltipDirection:N}):(0,a.jsx)(o.Q,{variant:"icon-on-mobile"===C?"invisible":void 0,leadingVisual:Q,trailingAction:l.TriangleDownIcon,"aria-labelledby":e,...t,...g,className:`${g?.className}${"icon-on-mobile"===C?` ${d}`:""}`,children:(0,a.jsx)(c.A,{title:D,maxWidth:f??195,children:D})})},placeholderText:"Search",items:V,loading:E,groups:h?[{groupId:"all"},{groupId:"select"}]:[],selectionVariant:m,initialSelectedItems:F,onSelectionChange:G,onLiveSelectionChange:"multiple"===m&&I?G:void 0,filterItems:k,getItemKey:W,convertToItemProps:q,title:"Select a repository",width:b,height:y,responsiveOnNarrow:_,onOpen:A,anchorSide:j})}m.displayName="ReposSelector"}}]);
//# sourceMappingURL=94484-a4b00fcd36e4d5d9-2d6c182d8024c067.js.map