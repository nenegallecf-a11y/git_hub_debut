performance.mark("js-parse-end:23857-cdeb570c099e52e9.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["23857"],{99976(e,t,s){s.d(t,{A:()=>G});var n=s(74848),i=s(7478),l=s(96540),a=s(54279),r=s(40961),o=s(99502);let d="TaskListItems-module__task-list-item__WMiKyTP";var c=s(16522),m=s(85965),u=s(20143);let h=e=>"string"==typeof e?.taskBox&&e?.text?.match(/[^\s\\]/)!==null,k=({container:e,nestedItems:t,globalIndex:s,markdownIndex:n,items:i,itemsData:l,nested:a=!1,lists:r,parentIsChecklist:o,hasDifferentListTypes:d})=>(i.map((i,c)=>{let m=Array.from(i.querySelectorAll(":scope > ul > li:not(.base-task-list-item), :scope > ol > li:not(.base-task-list-item)"))??[],u=Array.from(i.querySelectorAll(":scope > ul > li.task-list-item, :scope > ol > li.task-list-item"))??[],h=(Array.from(i.querySelectorAll("ul > li.task-list-item, ol > li.task-list-item, li.task-list-item"))??[]).length,f=[];h>0&&t.set(s.toString(),h);let g=i.classList.contains("task-list-item")?function(e,t){let s=t.parentElement?.closest(".contains-task-list");if(!s)throw Error("Could not find the item's parent list");let n=t?Array.from(s.children).indexOf(t):-1;return[e.indexOf(s),n]}(r,i):void 0,{title:_,content:p}=function(e){let t="",s="";for(let i of e.childNodes){var n;if("INPUT"===(n=i).nodeName||"UL"===n.nodeName||"OL"===n.nodeName||"#comment"===i.nodeName)continue;let e=i.textContent||"";if("#text"===i.nodeName){t+=e,s+=e;continue}if("CODE"===i.nodeName){t+=`\`${e}\``,s+=i.outerHTML;continue}t+=e,s+=i.outerHTML}return{title:t.trim(),content:s}}(i);l.push({id:s.toString(),index:c,title:_,content:p,checked:i.querySelector(".task-list-item-checkbox")?.checked===!0,position:g,container:i.parentElement,nested:a,children:f,markdownIndex:i.classList.contains("task-list-item")?n+=1:-1,isBullet:i.parentElement?.tagName==="UL"&&!i.classList.contains("task-list-item"),isNumbered:i.parentElement?.tagName==="OL"&&!i.classList.contains("task-list-item"),parentIsChecklist:o,hasNestedItems:h>0,hasDifferentListTypes:d});let x=m.length>0&&k({container:e,nestedItems:t,globalIndex:s+1,markdownIndex:n,items:m,itemsData:f,nested:!0,lists:r,parentIsChecklist:i.classList.contains("task-list-item"),hasDifferentListTypes:u.length>0&&m.length!==u.length});s=x?x.globalIndex:s+1,n=x?x.markdownIndex:n}),{globalIndex:s,markdownIndex:n}),f=async({markdownValue:e,markdownIndex:t,onChange:s})=>{let n=e.split(/\r?\n/),i=null,l=!1;for(let e=0,a=0;e<n.length;e++){let r=n[e];if(r.trim().startsWith("\x3c!--")&&(l=!0),l){r.trim().endsWith("--\x3e")&&(l=!1);continue}if(i){if(p(r,i)){i=null;continue}}else i=_(r);if(i)continue;let o=(0,u.VB)(r);if(h(o)){if(a===t){let t=(0,u.a1)(g(o));n.splice(e,1,t);let i=n.join("\n");return await s(i)}a++}}},g=e=>({...e,taskBox:"[ ]"===e.taskBox?"[x]":"[ ]"}),_=e=>{let t=e.match(/^ {0,3}(`{3,}|~{3,})[^`]*$/);return t?t[1]:null},p=(e,t)=>RegExp(`^ {0,3}${t}${t[0]}* *$`).test(e);var x=s(99418);let I=new Set(["reference","emoji","g-emoji","js-inline-math","js-display-math","issue-link","js-issue-link","issue-shorthand","user-mention","team-mention","js-team-mention","notranslate","commit-link","octicon","octicon-link","open","closed","merged","mr-1","color-fg-muted","color-fg-open","color-fg-done","color-fg-closed","sr-only","data-footnote-backref"]),v=[/^\/users\/[^/]+\/hovercard$/,/^\/orgs\/[^/]+\/hovercard$/,/^\/orgs\/[^/]+\/teams\/[^/]+\/hovercard$/,/^\/[^/]+\/[^/]+\/issues\/\d+\/hovercard$/,/^\/[^/]+\/[^/]+\/pull\/\d+\/hovercard$/,/^\/[^/]+\/[^/]+\/commit\/[a-fA-F0-9]+\/hovercard$/,/^\/[^/]+\/[^/]+\/discussions\/\d+\/hovercard$/,/^\/copilot\/hovercard$/,/^\/memexes\/\d+\/hovercard$/],L={ADD_TAGS:["math-renderer"],ADD_ATTR:["class","data-run-id","data-catalyst","data-hovercard-url","data-hovercard-type","data-octo-click","data-octo-dimensions"],ALLOW_DATA_ATTR:!1},b=(e,t)=>{if("class"===t.attrName&&t.attrValue){let e=t.attrValue.split(/\s+/).filter(e=>e&&I.has(e));0===e.length?t.keepAttr=!1:t.attrValue=e.join(" ")}"data-hovercard-url"===t.attrName&&t.attrValue&&!function(e){let t;if(!e.startsWith("/"))return!1;try{t=decodeURIComponent(e)}catch{return!1}return v.some(e=>e.test(t))}(t.attrValue)&&(t.keepAttr=!1)},T=null;function y(e){return"u"<typeof window?e:(!T&&(T=(0,x.default)()).addHook("uponSanitizeAttribute",b),T).sanitize(e,{...L,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1})}var N=s(26108),w=s(45596),j=s(18990),S=s(38621);let $=e=>{let t,s,i,a,r,d,m,u,h,k,f,g,_,p,x,I,v,L,b,T,y,$,A=(0,c.c)(61);A[0]!==e?({totalItems:f,onConvertToIssue:m,onConvertToSubIssue:u,item:d,allowIssueConversion:s,allowSubIssueConversion:a,disabled:r,setIsConverting:k,allowReordering:i,...h}=e,A[0]=e,A[1]=s,A[2]=i,A[3]=a,A[4]=r,A[5]=d,A[6]=m,A[7]=u,A[8]=h,A[9]=k,A[10]=f):(s=A[1],i=A[2],a=A[3],r=A[4],d=A[5],m=A[6],u=A[7],h=A[8],k=A[9],f=A[10]);let{title:C,index:D,id:E}=d,{moveToPosition:M}=(0,o.gY)(),[O,B]=(0,l.useState)(!1),R=`task-list-menu-item-${E}`;A[11]!==D||A[12]!==R?(g=e=>{if(e){let e=Array.from(document.querySelectorAll('[id^="task-list-menu-item-"]'));if(e.length>0){let t=e[Math.min(D,e.length-1)];t?.focus()}}else{let e=document.getElementById(R);e&&e.focus()}},A[11]=D,A[12]=R,A[13]=g):g=A[13];let V=g;A[14]!==D||A[15]!==M?(_=e=>{let{moveAction:t,e:s}=e;switch(s.preventDefault(),s.stopPropagation(),B(!1),t){case"up":M(D,D-1,!0);break;case"down":M(D,D+1,!1)}},A[14]=D,A[15]=M,A[16]=_):_=A[16];let F=_;A[17]!==V||A[18]!==F||A[19]!==d||A[20]!==m||A[21]!==u||A[22]!==k?(p=e=>{let{e:t,move:s,convertToIssue:n,convertToSubIssue:i}=e;t.preventDefault(),t.stopPropagation(),"Enter"===t.code&&s&&F({moveAction:s,e:t}),"Enter"===t.code&&n&&(B(!1),m?.(d,k,()=>{V(!1)})),"Enter"===t.code&&i&&(B(!1),u?.(d,k,()=>{V(!0)})),"Escape"===t.code&&B(!1)},A[17]=V,A[18]=F,A[19]=d,A[20]=m,A[21]=u,A[22]=k,A[23]=p):p=A[23];let q=p,H=h["data-testid"];return A[24]!==C?(t=C,x=`Open ${t} task options`,A[24]=C,A[25]=x):x=A[25],A[26]!==r||A[27]!==H||A[28]!==x?(I=(0,n.jsx)(N.K,{"data-testid":H,icon:S.KebabHorizontalIcon,variant:"invisible","aria-label":x,disabled:r,className:"TaskListMenu-module__TaskListMenuTriggerButton__lS23NHZ"}),A[26]=r,A[27]=H,A[28]=x,A[29]=I):I=A[29],A[30]!==R||A[31]!==I?(v=(0,n.jsx)(w.W.Anchor,{id:R,children:I}),A[30]=R,A[31]=I,A[32]=v):v=A[32],A[33]!==i||A[34]!==q||A[35]!==F||A[36]!==D||A[37]!==f?(L=i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j.l.Item,{onClick:e=>F({moveAction:"up",e:e}),onKeyDown:e=>q({e:e,move:"up"}),disabled:0===D,children:[(0,n.jsx)(j.l.LeadingVisual,{children:(0,n.jsx)(S.ChevronUpIcon,{})}),"Move up"]}),(0,n.jsxs)(j.l.Item,{onClick:e=>F({moveAction:"down",e:e}),onKeyDown:e=>q({e:e,move:"down"}),disabled:D===f-1,children:[(0,n.jsx)(j.l.LeadingVisual,{children:(0,n.jsx)(S.ChevronDownIcon,{})}),"Move down"]})]}),A[33]=i,A[34]=q,A[35]=F,A[36]=D,A[37]=f,A[38]=L):L=A[38],A[39]!==s||A[40]!==q||A[41]!==d||A[42]!==m||A[43]!==h||A[44]!==k?(b=s&&m&&(0,n.jsxs)(j.l.Item,{onClick:()=>m?.(d,k),onKeyDown:e=>q({e:e,convertToIssue:!0}),"data-testid":h["data-testid"]&&`${h["data-testid"]}-convert`,children:[(0,n.jsx)(j.l.LeadingVisual,{children:(0,n.jsx)(S.IssueOpenedIcon,{})}),"Convert to issue"]}),A[39]=s,A[40]=q,A[41]=d,A[42]=m,A[43]=h,A[44]=k,A[45]=b):b=A[45],A[46]!==a||A[47]!==q||A[48]!==d||A[49]!==u||A[50]!==h||A[51]!==k?(T=a&&u&&(0,n.jsxs)(j.l.Item,{onClick:()=>u?.(d,k),onKeyDown:e=>q({e:e,convertToSubIssue:!0}),"data-testid":h["data-testid"]&&`${h["data-testid"]}-convert-sub-issue`,children:[(0,n.jsx)(j.l.LeadingVisual,{children:(0,n.jsx)(S.IssueTracksIcon,{})}),"Convert to sub-issue"]}),A[46]=a,A[47]=q,A[48]=d,A[49]=u,A[50]=h,A[51]=k,A[52]=T):T=A[52],A[53]!==T||A[54]!==L||A[55]!==b?(y=(0,n.jsx)(w.W.Overlay,{children:(0,n.jsxs)(j.l,{children:[L,b,T]})}),A[53]=T,A[54]=L,A[55]=b,A[56]=y):y=A[56],A[57]!==O||A[58]!==y||A[59]!==v?($=(0,n.jsxs)(w.W,{open:O,onOpenChange:B,children:[v,y]}),A[57]=O,A[58]=y,A[59]=v,A[60]=$):$=A[60],$};$.displayName="TaskListMenu";let A=/\/issues\/\d*\d/,C=(e,t)=>{let s=document.createElement("div");s.innerHTML=e;let n=s.querySelectorAll("span.reference");if(0===n.length)return!0;if(t||n.length>1)return!1;let i=n[0];return i.remove(),""===s.innerHTML.trim()&&!!A.test(i.innerHTML)};function D(e){let t,s,r,d,u,h,k,g,_,p,x,I,v,L,b,T,N,w,j,S,A,D,E=(0,c.c)(73),{markdownValue:M,onChange:O,onConvertToIssue:B,onConvertToSubIssue:R,nested:V,position:F,item:q,totalItems:H,disabled:U,hideActions:W,itemIdToFocus:P,setitemIdToFocus:z,toggledItem:K,setToggledItem:G}=e,Z=void 0!==V&&V,X=void 0===F?1:F,[Y,Q]=(0,l.useState)(q.checked),[J,ee]=(0,l.useState)(!1),[et,es]=(0,l.useState)(!1);E[0]!==U||E[1]!==P||E[2]!==z?(t=()=>{P&&!U&&(function(e){let t=document.getElementById(`task-list-menu-item-${e}`);t&&t.focus()}(P),z?.(null))},s=[P,U,z],E[0]=U,E[1]=P,E[2]=z,E[3]=t,E[4]=s):(t=E[3],s=E[4]),(0,l.useEffect)(t,s),E[5]!==U||E[6]!==G||E[7]!==K?(r=()=>{K&&!U&&G(null)},d=[K,U,G],E[5]=U,E[6]=G,E[7]=K,E[8]=r,E[9]=d):(r=E[8],d=E[9]),(0,l.useEffect)(r,d),E[10]!==q.checked||E[11]!==q.id||E[12]!==q.markdownIndex||E[13]!==O||E[14]!==G?(u=e=>{Q(!q.checked),G(q.id),f({markdownValue:e,markdownIndex:q.markdownIndex,onChange:O})},E[10]=q.checked,E[11]=q.id,E[12]=q.markdownIndex,E[13]=O,E[14]=G,E[15]=u):u=E[15];let en=u,ei=!Z&&!q.hasDifferentListTypes||Z&&X<2&&!q.parentIsChecklist&&!q.hasDifferentListTypes;E[16]!==q.content?(h=C(q.content,!0),E[16]=q.content,E[17]=h):h=E[17],E[18]!==q.content?(k=C(q.content,!1),E[18]=q.content,E[19]=k):k=E[19],E[20]!==h||E[21]!==k?(g=[h,k],E[20]=h,E[21]=k,E[22]=g):g=E[22];let[el,ea]=g;E[23]!==q.content?(_=y(q.content),E[23]=q.content,E[24]=_):_=E[24];let er=_,eo=`tasklist-item-${X}-${q.markdownIndex}`,ed=!Z||B&&R?"TaskListItem-module__task-list-item__ZQYgSoI":"TaskListItem-module__no-convert-task-list-item__d5ccXRe";ed+=` ${Z&&H>0?"contains-task-list":""}`,ed+=U?" TaskListItem-module__disabled__GT_blma":"",E[25]===Symbol.for("react.memo_cache_sentinel")?(p=()=>ee(!0),x=()=>ee(!1),E[25]=p,E[26]=x):(p=E[25],x=E[26]),E[27]!==ei||E[28]!==U||E[29]!==J?(I=ei&&!U&&(0,n.jsx)(o.BS.DragTrigger,{className:`TaskListItem-module__drag-handle-icon__leVBHsL ${J?"TaskListItem-module__show-trigger__vdmDSDe":""}`,style:{width:"20px",height:"28px"}}),E[27]=ei,E[28]=U,E[29]=J,E[30]=I):I=E[30],E[31]!==I?(v=(0,n.jsx)("div",{className:"TaskListItem-module__drag-drop-container__Ug3pzj2",children:I}),E[31]=I,E[32]=v):v=E[32];let ec=`checkbox-item-${q.id}`,em=q.id===K;E[33]!==M||E[34]!==en?(L=e=>{e.preventDefault(),e.stopPropagation(),en(M)},E[33]=M,E[34]=en,E[35]=L):L=E[35];let eu=`${q.title} checklist item`;return E[36]!==Y||E[37]!==U||E[38]!==em||E[39]!==L||E[40]!==eu?(b=(0,n.jsx)(m.A,{autoFocus:em,checked:Y,disabled:U,onChange:L,"aria-label":eu,className:"TaskListItem-module__taskStatusCheckbox__gAkcbTF"}),E[36]=Y,E[37]=U,E[38]=em,E[39]=L,E[40]=eu,E[41]=b):b=E[41],E[42]!==er?(T=(0,n.jsx)(a.$6,{html:er,className:"TaskListItem-module__task-list-html__x7eysjp"}),E[42]=er,E[43]=T):T=E[43],E[44]!==ec||E[45]!==b||E[46]!==T?(N=(0,n.jsxs)("div",{className:"TaskListItem-module__checkbox-items__EDILvFr",id:ec,children:[b,T]}),E[44]=ec,E[45]=b,E[46]=T,E[47]=N):N=E[47],E[48]!==v||E[49]!==N?(w=(0,n.jsxs)("div",{className:"TaskListItem-module__left-aligned-content__zSwlbnd",children:[v,N]}),E[48]=v,E[49]=N,E[50]=w):w=E[50],E[51]!==et?(j=et&&(0,n.jsx)(i.A,{size:"small"}),E[51]=et,E[52]=j):j=E[52],E[53]!==ei||E[54]!==el||E[55]!==ea||E[56]!==U||E[57]!==W||E[58]!==et||E[59]!==q||E[60]!==B||E[61]!==R||E[62]!==eo||E[63]!==H?(S=!W&&ei&&q.position&&!et&&(0,n.jsx)($,{"data-testid":`${eo}-menu`,onConvertToIssue:B,onConvertToSubIssue:R,totalItems:H,item:q,disabled:U,allowIssueConversion:el,allowSubIssueConversion:ea,setIsConverting:es,allowReordering:ei}),E[53]=ei,E[54]=el,E[55]=ea,E[56]=U,E[57]=W,E[58]=et,E[59]=q,E[60]=B,E[61]=R,E[62]=eo,E[63]=H,E[64]=S):S=E[64],E[65]!==j||E[66]!==S?(A=(0,n.jsxs)("div",{className:"TaskListItem-module__TaskListItemActionsContainer__Rp8ka2F",children:[j,S]}),E[65]=j,E[66]=S,E[67]=A):A=E[67],E[68]!==w||E[69]!==A||E[70]!==eo||E[71]!==ed?(D=(0,n.jsxs)("div",{className:ed,onMouseEnter:p,onMouseLeave:x,"data-testid":eo,children:[w,A]}),E[68]=w,E[69]=A,E[70]=eo,E[71]=ed,E[72]=D):D=E[72],D}D.displayName="TaskListItem";function E(e){let t,s,i=(0,c.c)(5),{item:l,position:r}=e,o=`tasklist-item-${r}-${l.markdownIndex}`;i[0]!==l.content?(t=y(l.content),i[0]=l.content,i[1]=t):t=i[1];let d=t;return i[2]!==d||i[3]!==o?(s=(0,n.jsx)(a.$6,{html:d,"data-testid":o,className:"ListItem-module__ListItemContent__qxNlTED"}),i[2]=d,i[3]=o,i[4]=s):s=i[4],s}E.displayName="ListItem";let M=(e,t)=>{let s,n=t.split(/\r?\n/),i=-1,l=-1,a=-1;for(let[t,r]of n.entries()){let n=(0,u.VB)(r),o=n?.leadingWhitespace.length;if(s&&(!r||void 0!==o&&o<=s.leadingWhitespace.length)){l=t>0?t-1:0;break}n&&h(n)&&++a===e&&(i=t,s=n)}return{startLineNumber:i,endLineNumber:l=-1===l?n.length-1:l}},O=({tasklists:e,markdownValue:t,externalOnChange:s,onConvertToIssue:i,onConvertToSubIssue:a,tasklistData:c,setTasklistData:m,disabled:u,viewerCanUpdate:h})=>{let[k,f]=(0,l.useState)(!1),[g,_]=(0,l.useState)(null),[p,x]=(0,l.useState)(null),I=(0,l.useCallback)(async({dragMetadata:e,dropMetadata:n,isBefore:i,items:l,container:a})=>{if(e.id===n?.id||u)return;f(!0);let r=l.find(t=>t.id===e.id)?.markdownIndex,o=l.find(e=>e.id===n.id)?.markdownIndex;if(void 0===r||void 0===o)return;let d=((e,t,s,n)=>{let{startLineNumber:i,endLineNumber:l}=M(s,e),{startLineNumber:a,endLineNumber:r}=M(n,e),o=e.split(/\r?\n/),d=l-i+1,c=[...o].splice(i,d);return t?(o.splice(i,d),o.splice(a,0,...c)):(o.splice(r+1,0,...c),o.splice(i,d)),o.join("\n")})(t,i,r,o);m(((e,t,s,n,i,l)=>{let a=new Map(n),r=e.findIndex(e=>e.id===t),o=e[r];if(!o)return a;let d=[...e];d.splice(r,1);let c=d.findIndex(e=>e.id===s);d.splice(i?c:c+1,0,o);let m=n.get(l);if(!m)return a;if(m===e)a.set(l,d);else{let t=s=>{for(let n of s)n.children===e?n.children=d:n.children&&t(n.children)};t(m),a.set(l,m)}return a})(l,e.id,n.id,c,i,a)),s&&(await s(d),f(!1),_(n.id))},[u,t,c,m,s]),v=(0,l.useCallback)(async e=>{s&&(f(!0),await s(e),f(!1))},[s]);function L(e,s,r,c,m,f){let b=!e.isBullet&&!e.isNumbered,T="OL"===r.tagName?"ol":"UL"===r.tagName?"ul":"div";return(0,n.jsxs)(l.Fragment,{children:[b&&(0,n.jsx)(D,{toggledItem:p,setToggledItem:x,markdownValue:t,onChange:v,onConvertToIssue:i,onConvertToSubIssue:a,nested:m,position:s,item:e,totalItems:c,disabled:u||k,hideActions:!h&&!k,setitemIdToFocus:_,itemIdToFocus:g}),!b&&(0,n.jsx)(E,{item:e,position:s}),e.children.length>0&&(0,n.jsx)(o.BS,{items:e.children,onDrop:t=>I({...t,items:e.children,container:r}),renderOverlay:(t,i)=>(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,className:d,isDragOverlay:!0,style:{marginLeft:"-30px"},children:L(t,s+1,r,e.children.length,!0,!0)},t.id),as:"div",children:(0,n.jsx)(T,{className:"base-list-item",style:{listStyleType:"none",marginLeft:b?"12px":"-28px"},children:e.children.map((t,i)=>{let l=B({child:t,position:s}),a=R({child:t,isDragOverlay:f}),d=V({child:t,isDragOverlay:f});return(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,className:`${l} ${a} ${d}`,as:F(e)?"li":"div",children:L(t,s+1,r,e.children.length,!0,f)},t.id)})})})]},e.index)}return(0,l.useMemo)(()=>(0,n.jsx)(n.Fragment,{children:e.map((e,t)=>{let s=c.get(e)||[],i=s.filter(e=>!e.isBullet&&!e.isNumbered),l="OL"===e.tagName?"ol":"UL"!==e.tagName||e.classList.contains("contains-task-list")&&i.length===s.length?"div":"ul";return s.length>0?(0,r.createPortal)((0,n.jsx)("li",{className:"base-task-list-item",style:{listStyle:"none",marginLeft:"-28px"},children:(0,n.jsx)(o.BS,{items:s,onDrop:t=>I({...t,items:s,container:e}),style:{marginTop:"1px"},renderOverlay:(t,i)=>(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,isDragOverlay:!0,children:L(t,0,e,s.length,!1,!0)},t.id),as:"div",children:(0,n.jsx)(l,{className:"base-list-item",style:{marginLeft:i.length!==s.length&&i.length?"5px":"0px"},children:s.map((t,i)=>(0,n.jsx)(o.BS.Item,{index:i,id:t.id,title:t.title,hideTrigger:!0,className:t.isBullet?"TaskListItems-module__bullet-task-item__IaDovoT":t.isNumbered?"TaskListItems-module__numbered-task-item__tfk5rZb":d,as:F(t)?"li":"div",style:{marginLeft:t.isBullet||t.isNumbered||!t.hasDifferentListTypes?"0px":"-28px",marginRight:"-8px"},children:L(t,0,e,s.length,!1,!1)},t.id))})})}),e,t.toString()):null})}),[t,c,u])};O.displayName="TaskListItems";let B=({child:e,position:t})=>e.isNumbered?t+1<2?"TaskListItems-module__numbered-task-list__lcAPwgy":"TaskListItems-module__numbered-task-list-nested__liGae6E":e.isBullet?t+1<2?"TaskListItems-module__unordered-task-list__rdSSwLr":"TaskListItems-module__unordered-task-list-nested__eRXZkBx":d,R=({child:e,isDragOverlay:t})=>!e.isBullet&&!e.isNumbered&&(t?"TaskListItems-module__nested-overlay-list__XcFM5AN":e.parentIsChecklist||e.hasDifferentListTypes?"":d),V=({child:e,isDragOverlay:t})=>(e.isBullet||e.isNumbered)&&(t?"TaskListItems-module__overlay-task-list-child__DzA4WA_":""),F=e=>(e.isNumbered||e.isBullet)&&!e.hasDifferentListTypes||e.hasDifferentListTypes||e.children.length>0;var q=s(34164);let H=[];function U(){return new Map}function W(){return new Map}let P=function(e,t,s){let n,i,a,r=(0,c.c)(8);r[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],r[0]=n):n=r[0];let[o,d]=(0,l.useState)(n);return r[1]!==e||r[2]!==t?(i=()=>{let s=Array.from(e.current?.querySelectorAll(t)??H);d(e=>!function(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}(e,s)?s:e)},r[1]=e,r[2]=t,r[3]=i):i=r[3],r[4]!==e||r[5]!==t||r[6]!==s?(a=[s,e,t],r[4]=e,r[5]=t,r[6]=s,r[7]=a):a=r[7],(0,l.useLayoutEffect)(i,a),o};var z=s(28783);let K=/\b(href|src)\s*=\s*(['"])([^'"?]{1,2000})(\?(?:[^'"]{0,1000}?))token=([^&#"']{0,500})([^'"]{0,1000})\2/gi,G=({verifiedHTML:e,markdownValue:t="",onChange:s,onConvertToIssue:r,onConvertToSubIssue:o,onLinkClick:d,openLinksInNewTab:m=!1,loading:u=!1,disabled:h,viewerCanUpdate:f,className:g})=>{let _=(0,l.useRef)(null),p=P(_,".contains-task-list:not(.contains-task-list .contains-task-list)",e),x=(0,l.useRef)(""),I=(0,l.useMemo)(()=>{var t,s,n;let i;return t=x.current,s=e,n=function(e){let t,s={};K.lastIndex=0;let n=0;for(;null!==(t=K.exec(e))&&!(++n>1e3);){let e=t[3],n=t[4],i=t[5],l=t[6];e&&i&&(s[`${e}${n}token=TOKEN_PLACEHOLDER${l}`]=i)}return s}(t),K.lastIndex=0,i=0,s.replace(K,(e,t,s,l,a,r,o)=>{if(++i>1e3)return e;let d=`${l}${a}token=TOKEN_PLACEHOLDER${o}`;return n.hasOwnProperty(d)?`${t}=${s}${l}${a}token=${n[d]}${o}${s}`:e})},[e]);x.current=I;let{tasklistData:v,nestedItems:L,setTasklistData:b}=((e,t)=>{let s,n,i,a=(0,c.c)(7),[r,o]=(0,l.useState)(U),[d,m]=(0,l.useState)(W);return a[0]!==e||a[1]!==t?(s=()=>{if(!e)return;let s=function({container:e,tasklists:t}){let s=new Map,n=new Map,i=function(e,t="ul:not(.base-list-item), ol:not(.base-list-item)"){return Array.from(e.querySelectorAll(t)).filter(e=>!e.closest("tracking-block"))}(e),l=0,a=-1;for(let r of t){let t=Array.from(r.querySelectorAll(":scope > li:not(.base-task-list-item)")),o=r.querySelectorAll(":scope > li.task-list-item"),d=[],{globalIndex:c,markdownIndex:m}=k({container:e,nestedItems:n,globalIndex:l,markdownIndex:a,items:t,itemsData:d,nested:!1,lists:i,parentIsChecklist:r.classList.contains("task-list-item"),hasDifferentListTypes:o.length>0&&o.length!==t.length});for(let e of(l=c,a=m,s.set(r,d),t))e.remove()}return{newData:s,nestedItems:n}}({container:e,tasklists:t});o(s.newData),m(s.nestedItems)},n=[e,t],a[0]=e,a[1]=t,a[2]=s,a[3]=n):(s=a[2],n=a[3]),(0,l.useLayoutEffect)(s,n),a[4]!==d||a[5]!==r?(i={tasklistData:r,nestedItems:d,setTasklistData:o,setNestedItems:m},a[4]=d,a[5]=r,a[6]=i):i=a[6],i})(_.current,p);(0,z.O)({htmlContainerRef:_,onLinkClick:d,openLinksInNewTab:m});let T=(0,l.useMemo)(()=>{let e=["markdown-body","NewMarkdownViewer-module__safe-html-box__doCwx1z"];return g&&e.push(g),(0,n.jsx)(a.vb,{ref:_,className:(0,q.$)(e),html:I})},[g,I]);return u?(0,n.jsx)("div",{className:(0,q.$)("NewMarkdownViewer-module__spinner__cOO7zNC"),children:(0,n.jsx)(i.A,{"aria-label":"Loading markdown content..."})}):(0,n.jsxs)(n.Fragment,{children:[T,p.length>0&&(0,n.jsx)(O,{tasklists:p,markdownValue:t,externalOnChange:s,onConvertToIssue:r,onConvertToSubIssue:o,tasklistData:v,setTasklistData:b,nestedItems:L,disabled:h||!s,viewerCanUpdate:f})]})};G.displayName="NewMarkdownViewer"}}]);
//# sourceMappingURL=23857-cdeb570c099e52e9-686c4dacebef96f3.js.map